<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Get daily trip counts per origin-destionation municipality from 2022 onward — spod_quick_get_od • spanishoddata</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../lightswitch.js"></script><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.10/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Get daily trip counts per origin-destionation municipality from 2022 onward — spod_quick_get_od"><meta name="description" content="
WARNING: this function may stop working at any time, as the API may change. This function provides a quick way to get daily aggregated (no hourly data) trip counts per origin-destination municipality from v2 data (2022 onward). Compared to spod_get(), which downloads large CSV files, this function downloads the data directly from the GraphQL API. An interactive web map with this data is available at https://mapas-movilidad.transportes.gob.es/. No data aggregation is performed on your computer (unlike in spod_get()), so you do not need to worry about memory usage and do not have to use a powerful computer with multiple CPU cores just to get this simple data. Only about 1 MB of data is downloaded for a single day. The limitation of this function is that it can only retrieve data for a single day at a time and only with total number of trips and total km travelled. So it is not possible to get any of the extra variables available in the full dataset via spod_get().
For detailed data descriptions, see package vignettes using spod_codebook(ver = 1) and spod_codebook(ver = 2) and official methodology documents in References section."><meta property="og:description" content="
WARNING: this function may stop working at any time, as the API may change. This function provides a quick way to get daily aggregated (no hourly data) trip counts per origin-destination municipality from v2 data (2022 onward). Compared to spod_get(), which downloads large CSV files, this function downloads the data directly from the GraphQL API. An interactive web map with this data is available at https://mapas-movilidad.transportes.gob.es/. No data aggregation is performed on your computer (unlike in spod_get()), so you do not need to worry about memory usage and do not have to use a powerful computer with multiple CPU cores just to get this simple data. Only about 1 MB of data is downloaded for a single day. The limitation of this function is that it can only retrieve data for a single day at a time and only with total number of trips and total km travelled. So it is not possible to get any of the extra variables available in the full dataset via spod_get().
For detailed data descriptions, see package vignettes using spod_codebook(ver = 1) and spod_codebook(ver = 2) and official methodology documents in References section."><meta property="og:image" content="https://rOpenSpain.github.io/spanishoddata/reference/figures/card.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@rOpenSpain"><meta name="twitter:site" content="@rOpenSpain"><!-- rogtemplate style sheet --><link href="../BS5/rostemplate.min.css" rel="stylesheet"></head><body>
  <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


  <nav class="navbar navbar-expand-lg fixed-top " aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html"><img src="../apple-touch-icon.png" alt="spanishoddata logo" height="34" width="34" class="d-inline-block me-1">spanishoddata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.2.9000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Codebooks</h6></li>
    <li><a class="dropdown-item" href="../articles/v1-2020-2021-mitma-data-codebook.html">Codebook and cookbook for v1 (2020-2021) Spanish mobility data</a></li>
    <li><a class="dropdown-item" href="../articles/v2-2022-onwards-mitma-data-codebook.html">Codebook and cookbook for v2 (2022 onwards) Spanish mobility data</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Get/convert</h6></li>
    <li><a class="dropdown-item" href="../articles/quick-get.html">Quicky get daily data</a></li>
    <li><a class="dropdown-item" href="../articles/convert.html">Download and convert mobility datasets</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Visualise</h6></li>
    <li><a class="dropdown-item" href="../articles/flowmaps-static.html">Making static flow maps</a></li>
    <li><a class="dropdown-item" href="../articles/flowmaps-interactive.html">Making interactive flow maps</a></li>
    <li><a class="dropdown-item" href="../articles/disaggregation.html">OD data disaggregation</a></li>
    <li><hr class="dropdown-divider"></li>
    <li><h6 class="dropdown-header" data-toc-skip>Tutorials</h6></li>
    <li><a class="external-link dropdown-item" href="https://www.ekotov.pro/agit-2025-spanishoddata/">Analysing massive open human mobility data using spanishoddata, duckdb and flowmaps</a></li>
    <li><a class="external-link dropdown-item" href="https://www.ekotov.pro/spanish-open-mobility-workshop-ic2s2-2025/">Mobility Flows and Accessibility Using R and Big Open Data</a></li>
    <li><a class="external-link dropdown-item" href="https://tdscience.github.io/dstp/">Data Science for Transport Planning</a></li>
  </ul></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rOpenSpain/spanishoddata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-lightswitch" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true" aria-label="Light switch"><span class="fa fa-sun"></span></button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-lightswitch"><li><button class="dropdown-item" data-bs-theme-value="light"><span class="fa fa-sun"></span> Light</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="dark"><span class="fa fa-moon"></span> Dark</button></li>
    <li><button class="dropdown-item" data-bs-theme-value="auto"><span class="fa fa-adjust"></span> Auto</button></li>
  </ul></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
    <div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Get daily trip counts per origin-destionation municipality from 2022 onward</h1>
      <small class="dont-index">Source: <a href="https://github.com/rOpenSpain/spanishoddata/blob/main/R/quick-get.R" class="external-link"><code>R/quick-get.R</code></a></small>
      <div class="d-none name"><code>spod_quick_get_od.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p><a href="https://lifecycle.r-lib.org/articles/stages.html#experimental" class="external-link"><img src="figures/lifecycle-experimental.svg" alt="[Experimental]"></a></p>
<p><strong>WARNING: this function may stop working at any time, as the API may change</strong>. This function provides a quick way to get daily aggregated (no hourly data) trip counts per origin-destination municipality from v2 data (2022 onward). Compared to <code><a href="spod_get.html">spod_get()</a></code>, which downloads large CSV files, this function downloads the data directly from the GraphQL API. An interactive web map with this data is available at <a href="https://mapas-movilidad.transportes.gob.es/" class="external-link">https://mapas-movilidad.transportes.gob.es/</a>. No data aggregation is performed on your computer (unlike in <code><a href="spod_get.html">spod_get()</a></code>), so you do not need to worry about memory usage and do not have to use a powerful computer with multiple CPU cores just to get this simple data. Only about 1 MB of data is downloaded for a single day. The limitation of this function is that it can only retrieve data for a single day at a time and only with total number of trips and total km travelled. So it is not possible to get any of the extra variables available in the full dataset via <code><a href="spod_get.html">spod_get()</a></code>.</p>
<p>For detailed data descriptions, see package vignettes using <code><a href="spod_codebook.html">spod_codebook(ver = 1)</a></code> and <code><a href="spod_codebook.html">spod_codebook(ver = 2)</a></code> and official methodology documents in <strong>References</strong> section.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">spod_quick_get_od</span><span class="op">(</span></span>
<span>  date <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  min_trips <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  distances <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"500m-2km"</span>, <span class="st">"2-10km"</span>, <span class="st">"10-50km"</span>, <span class="st">"50+km"</span><span class="op">)</span>,</span>
<span>  id_origin <span class="op">=</span> <span class="cn">NA</span>,</span>
<span>  id_destination <span class="op">=</span> <span class="cn">NA</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg-date">date<a class="anchor" aria-label="anchor" href="#arg-date"></a></dt>
<dd><p>A character or Date object specifying the date for which to retrieve the data. If date is a character, the date must be in "YYYY-MM-DD" or "YYYYMMDD" format.</p></dd>


<dt id="arg-min-trips">min_trips<a class="anchor" aria-label="anchor" href="#arg-min-trips"></a></dt>
<dd><p>A numeric value specifying the minimum number of journeys per origin-destination pair to retrieve. Defaults to 100 to reduce the amount of data returned. Can be set to 0 to retrieve all data.</p></dd>


<dt id="arg-distances">distances<a class="anchor" aria-label="anchor" href="#arg-distances"></a></dt>
<dd><p>A character vector specifying the distances to retrieve. Valid values are "500m-2km", "2-10km", "10-50km", and "50+km". Defaults to <code>c("500m-2km", "2-10km", "10-50km", "50+km")</code>. The resulting data will not have number of trips per category of distance. Therefore, if you want to retrieve the number of trips per distance category, you need to make 4 separate calls to this function or use <code><a href="spod_get.html">spod_get()</a></code> instead to get the full data from source CSV files.</p></dd>


<dt id="arg-id-origin">id_origin<a class="anchor" aria-label="anchor" href="#arg-id-origin"></a></dt>
<dd><p>A character vector specifying the origin municipalities to retrieve. If not provided, all origin municipalities will be included. Valid municipality IDs can be found in the dataset returned by <code>spod_get_zones(zones = "muni", ver = 2)</code>.</p></dd>


<dt id="arg-id-destination">id_destination<a class="anchor" aria-label="anchor" href="#arg-id-destination"></a></dt>
<dd><p>A character vector specifying the target municipalities to retrieve. If not provided, all target municipalities will be included. Valid municipality IDs can be found in the dataset returned by <code>spod_get_zones(zones = "muni", ver = 2)</code>.</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>A <code>tibble</code> containing the flows for the specified date, minimum number of journeys, distances and origin-destination pairs if specified. The columns are:</p><dl><dt>date</dt>
<dd><p>The date of the trips.</p></dd>

<dt>id_origin</dt>
<dd><p>The origin municipality ID.</p></dd>

<dt>id_destination</dt>
<dd><p>The target municipality ID.</p></dd>

<dt>n_trips</dt>
<dd><p>The number of trips between the origin and target municipality.</p></dd>

<dt>trips_total_length_km</dt>
<dd><p>The total length of trips in kilometers.</p></dd>


</dl></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>

<ul><li><p><strong>For the official website of the mobility study</strong>: Ministerio de Transportes y Movilidad Sostenible (MITMS) (2024).
“Estudio de la movilidad con Big Data (Study of mobility with Big Data).”
Data License: <a href="https://www.transportes.gob.es/el-ministerio/buen-gobierno/licencia_datos" class="external-link">https://www.transportes.gob.es/el-ministerio/buen-gobierno/licencia_datos</a>, <a href="https://www.transportes.gob.es/ministerio/proyectos-singulares/estudio-de-movilidad-con-big-data" class="external-link">https://www.transportes.gob.es/ministerio/proyectos-singulares/estudio-de-movilidad-con-big-data</a>.</p></li>
<li><p><strong>For v1 data methodology</strong>: Ministerio de Transportes, Movilidad y Agenda Urbana (MITMA) (2021).
<em>Análisis de la movilidad en España con tecnología Big Data durante el estado de alarma para la gestión de la crisis del COVID-19 (Analysis of mobility in Spain with Big Data technology during the state of alarm for COVID-19 crisis management)</em>.
<a href="https://cdn.mitma.gob.es/portal-web-drupal/covid-19/bigdata/mitma_-_estudio_movilidad_covid-19_informe_metodologico_v3.pdf" class="external-link">https://cdn.mitma.gob.es/portal-web-drupal/covid-19/bigdata/mitma_-_estudio_movilidad_covid-19_informe_metodologico_v3.pdf</a>.</p></li>
<li><p><strong>For v2 data methodology</strong>: Ministerio de Transportes y Movilidad Sostenible (MITMS) (2024).
<em>Estudio de movilidad de viajeros de ámbito nacional aplicando la tecnología Big Data. Informe metodológico (Study of National Traveler mobility Using Big Data Technology. Methodological Report)</em>.
<a href="https://www.transportes.gob.es/recursos_mfom/paginabasica/recursos/a3_informe_metodologico_estudio_movilidad_mitms_v8.pdf" class="external-link">https://www.transportes.gob.es/recursos_mfom/paginabasica/recursos/a3_informe_metodologico_estudio_movilidad_mitms_v8.pdf</a>.</p></li>
<li><p><strong>For the <code>spanishoddata</code> R package</strong>: Kotov E, Vidal-Tortosa E, Cantú-Ros OG, Burrieza-Galán J, Herranz R, Gullón Muñoz-Repiso T, Lovelace R (2026).
“spanishoddata: A package for accessing and working with Spanish Open Mobility Big Data.”
<em>Environment and Planning B: Urban Analytics and City Science</em>.
ISSN 2399-8083, <a href="https://doi.org/10.1177/23998083251415040" class="external-link">doi:10.1177/23998083251415040</a>
.</p></li>
</ul><p>Use <code><a href="spod_cite.html">spod_cite()</a></code> to cite the package and the data with correct plain text, markdown, or BibTeX formats.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># interactive()</span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="va">od_1000</span> <span class="op">&lt;-</span> <span class="fu">spod_quick_get_od</span><span class="op">(</span></span></span>
<span class="r-in"><span>  date <span class="op">=</span> <span class="st">"2022-01-01"</span>,</span></span>
<span class="r-in"><span>  min_trips <span class="op">=</span> <span class="fl">1000</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>

  </div>

  <!-- ropenspain rostemplate -->
<footer id="footer"><div class="container">
    <div class="row">
      <div class="col-md">
        <h4 data-toc-skip>About <img src="../logo.png" alt="spanishoddata Logo" height="24" class="round-logo">
          spanishoddata</h4>
        <p>Developed by <a href="https://www.ekotov.pro" class="external-link">Egor Kotov</a>, <a href="https://www.robinlovelace.net/" class="external-link">Robin Lovelace</a>. <br>Part of the <span class="ROS-light">rOpenSpain</span> project.
</p>
        <hr class="d-md-none"></div>
      <div class="col-md offset-md-4">
        <h4 data-toc-skip>About <img src="../ROS-logo.png" alt="ROpenSpain Logo" height="24" class="round-logo"><span class="ROS-light">
            rOpenSpain</span></h4>
        <p><a href="https://ropenspain.es/" class="external-link"><span class="ROS-light">rOpenSpain</span></a> is a community of
          enthusiasts
          of <strong>R</strong>, open data, and reproducibility that comes
          together and organizes itself to create <strong>R</strong> packages of
          the highest quality for the analysis
          and use of Spanish data of general interest.
        </p>
        <p class="fst-italic text-md-end">"rOpenSci is our form, Spanish public
          data our matter"</p>
        <hr class="d-md-none"></div>
    </div>
  </div>
</footer><div id="copyright">
  <div class="container">
    <div class="row">
      <div class="col-md text-center text-md-start">
        <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.2.0.</p>
      </div>
      <div class="col-md offset-md-4 text-center text-md-start lh-base">
        <p>Template <a href="https://ropenspain.github.io/rostemplate/" class="external-link">rostemplate</a> by
          <a href="https://github.com/dieghernan/" class="external-link">dieghernan</a>, based on <a href="https://devcows.github.io/hugo-universal-theme/" class="external-link">Universal
            Theme for Hugo</a>.
        </p>
      </div>
    </div>
  </div>
</div>




  <script>
  var h1s = document.getElementsByTagName("h1");
  var myH1;
  if (h1s.length > 0) {
    myH1 = h1s[0];
    myH1.classList.add("ROSh1");
  }
</script></body></html>

