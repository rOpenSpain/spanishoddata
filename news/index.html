<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Changelog • spanishoddata</title><!-- favicons --><link rel="icon" type="image/png" sizes="96x96" href="../favicon-96x96.png"><link rel="icon" type="”image/svg+xml”" href="../favicon.svg"><link rel="apple-touch-icon" sizes="180x180" href="../apple-touch-icon.png"><link rel="icon" sizes="any" href="../favicon.ico"><link rel="manifest" href="../site.webmanifest"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Changelog"><meta property="og:image" content="https://rOpenSpain.github.io/spanishoddata/reference/figures/card.png"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:creator" content="@rOpenSpain"><meta name="twitter:site" content="@rOpenSpain"><link rel="preconnect" href="https://fonts.googleapis.com"><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link href="https://fonts.googleapis.com/css2?family=Roboto+Mono&amp;family=Roboto:ital,wght@0,100;0,300;0,400;0,500;0,700;0,900;1,100;1,300;1,400;1,500;1,700;1,900&amp;display=swap" rel="stylesheet"><!-- rogtemplate style sheet --><link href="../BS5/rostemplate.min.css" rel="stylesheet"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
  <a class="navbar-brand me-2" href="../index.html">
    <img src="../apple-touch-icon.png" alt="spanishoddata logo" height="40" class="d-inline-block me-1">spanishoddata</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.2.0.9000</small>

    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles"><li><a class="dropdown-item" href="../articles/v1-2020-2021-mitma-data-codebook.html">Codebook and cookbook for v1 (2020-2021) Spanish mobility data</a></li>
    <li><a class="dropdown-item" href="../articles/v2-2022-onwards-mitma-data-codebook.html">Codebook and cookbook for v2 (2022 onwards) Spanish mobility data</a></li>
    <li><a class="dropdown-item" href="../articles/quick-get.html">Quicky get daily data</a></li>
    <li><a class="dropdown-item" href="../articles/convert.html">Download and convert mobility datasets</a></li>
    <li><a class="dropdown-item" href="../articles/disaggregation.html">OD data disaggregation</a></li>
    <li><a class="dropdown-item" href="../articles/flowmaps-static.html">Making static flow maps</a></li>
    <li><a class="dropdown-item" href="../articles/flowmaps-interactive.html">Making interactive flow maps</a></li>
  </ul></li>
<li class="active nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/rOpenSpain/spanishoddata/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>
  </div>
</nav><div class="container template-news">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Changelog</h1>
      <small>Source: <a href="https://github.com/rOpenSpain/spanishoddata/blob/main/NEWS.md" class="external-link"><code>NEWS.md</code></a></small>
    </div>

    <div class="section level2">
<h2 class="pkg-version" data-toc-text="development version" id="spanishoddata-development-version">spanishoddata (development version)<a class="anchor" aria-label="anchor" href="#spanishoddata-development-version"></a></h2>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.2.0" id="spanishoddata-020-2025-06-15">spanishoddata 0.2.0 (2025-06-15)<a class="anchor" aria-label="anchor" href="#spanishoddata-020-2025-06-15"></a></h2><p class="text-muted">CRAN release: 2025-06-15</p>
<div class="section level3">
<h3 id="new-features-0-2-0">New features<a class="anchor" aria-label="anchor" href="#new-features-0-2-0"></a></h3>
<ul><li><p><code><a href="../reference/spod_quick_get_zones.html">spod_quick_get_zones()</a></code> is a new function to quickly get municipality geometries to match with the data retrieved with <code><a href="../reference/spod_quick_get_od.html">spod_quick_get_od()</a></code> (PR <a href="https://github.com/rOpenSpain/spanishoddata/pull/163" class="external-link">#163</a>). This function is experimental, just as the <code><a href="../reference/spod_quick_get_od.html">spod_quick_get_od()</a></code> function, as the API of the Spanish Ministry of Transport may change in the future. It is only intended for quick analysis in educational or other demonstration purposes, as it downloads very little data compared to the regular <code>spod_get_od()</code>, <code><a href="../reference/spod_download.html">spod_download()</a></code> and <code><a href="../reference/spod_convert.html">spod_convert()</a></code> functions. The requests are cached in memory of the current R session with <code>memoise</code> package, so repeated calls to <code><a href="../reference/spod_quick_get_zones.html">spod_quick_get_zones()</a></code> will not cause repeated requests to the API and will allow the user to get the data faster from repeat calls.</p></li>
<li><p>Experimental <code><a href="../reference/spod_check_files.html">spod_check_files()</a></code> function allows to check consistency of downloaded files with Amazon S3 checksums (PR <a href="https://github.com/rOpenSpain/spanishoddata/pull/165" class="external-link">#165</a>). ETags for v1 data are stored with the package, and for v2 data they are fetched from Amazon S3. The checks may fail for May 2022 data and for some 2025 data, as the remote cheksums that are used for checking the file consistency are incorrect. We are working on solving this in future updates, for now, kindly rely on the built-in file size checks of <code><a href="../reference/spod_download.html">spod_download()</a></code>, <code><a href="../reference/spod_get.html">spod_get()</a></code>, and <code><a href="../reference/spod_convert.html">spod_convert()</a></code>.</p></li>
</ul></div>
<div class="section level3">
<h3 id="improvements-0-2-0">Improvements<a class="anchor" aria-label="anchor" href="#improvements-0-2-0"></a></h3>
<ul><li><p><code><a href="../reference/spod_get.html">spod_get()</a></code> and <code><a href="../reference/spod_convert.html">spod_convert()</a></code> are now up to x100,000 faster when you have all (or a lot of) data downloaded, but only requesting several days in the call to <code><a href="../reference/spod_get.html">spod_get()</a></code> or <code><a href="../reference/spod_convert.html">spod_convert()</a></code>. This is thanks to a new smarter filtering strategy (issue <a href="https://github.com/rOpenSpain/spanishoddata/issues/159" class="external-link">#159</a>, PR <a href="https://github.com/rOpenSpain/spanishoddata/pull/166" class="external-link">#166</a>).</p></li>
<li><p>Metadata is now fetched from Amazon S3 storage of the original data files, which allows validation of downloaded files (issue <a href="https://github.com/rOpenSpain/spanishoddata/issues/126" class="external-link">#126</a>) with both size and checksum. PR <a href="https://github.com/rOpenSpain/spanishoddata/pull/165" class="external-link">#165</a>.</p></li>
<li><p>Metadata fetched by <code><a href="../reference/spod_available_data.html">spod_available_data()</a></code> has extra columns such as data <code>type</code>, <code>zones</code> and <code>period</code>, see help <code>?spod_available_data()</code> for details.</p></li>
<li><p>Memory allocation is now delegated to <code>DuckDB</code> engine, which by default uses 80% of available RAM. Beware that in some HPC environments this may detect more memory than is actually available to your job, so set the limit manually to 80% of RAM available to your job with <code>max_mem_gb</code> argument of <code><a href="../reference/spod_get.html">spod_get()</a></code>, <code><a href="../reference/spod_convert.html">spod_convert()</a></code>, <code><a href="../reference/spod_connect.html">spod_connect()</a></code> functions. This will also improve performance in some cases, as DuckDB is more efficient than R at memory allocation (PR <a href="https://github.com/rOpenSpain/spanishoddata/pull/167" class="external-link">#167</a>).</p></li>
</ul></div>
<div class="section level3">
<h3 id="bug-fixes-0-2-0">Bug fixes<a class="anchor" aria-label="anchor" href="#bug-fixes-0-2-0"></a></h3>
<ul><li><p>More reliable, but still multi-threaded data file downloads using base R <code><a href="https://rdrr.io/r/utils/download.file.html" class="external-link">utils::download.file()</a></code> instead of <code><a href="https://jeroen.r-universe.dev/curl/reference/multi_download.html" class="external-link">curl::multi_download()</a></code> which failed on some connections (issue <a href="https://github.com/rOpenSpain/spanishoddata/issues/127" class="external-link">#127</a>), so now <code>curl</code> dependency is no longer required. PR <a href="https://github.com/rOpenSpain/spanishoddata/pull/165" class="external-link">#165</a>.</p></li>
<li><p><code><a href="../reference/spod_quick_get_od.html">spod_quick_get_od()</a></code> is working again. We fixed it to work with the updated API of the Spanish Ministry of Transport (PR <a href="https://github.com/rOpenSpain/spanishoddata/pull/163" class="external-link">#163</a>, issue <a href="https://github.com/rOpenSpain/spanishoddata/issues/162" class="external-link">#162</a>). This function will remain experimental, just as the <code><a href="../reference/spod_quick_get_zones.html">spod_quick_get_zones()</a></code> function, as the API of the Spanish Ministry of Transport may change in the future. It is only intended for quick analysis in educational or other demonstration purposes, as it downloads very little data compared to the regular <code>spod_get_od()</code>, <code><a href="../reference/spod_download.html">spod_download()</a></code> and <code><a href="../reference/spod_convert.html">spod_convert()</a></code> functions. The requests are cached in memory of the current R session with <code>memoise</code> package, so repeated calls to <code><a href="../reference/spod_quick_get_od.html">spod_quick_get_od()</a></code> will not cause repeated requests to the API and will allow the user to get the data faster from repeat calls.</p></li>
<li><p><code><a href="../reference/spod_convert.html">spod_convert()</a></code> now accepts <code>overwrite = 'update'</code> with <code>save_format = 'parquet'</code> (<a href="https://github.com/rOpenSpain/spanishoddata/pull/161" class="external-link">#161</a>) previously it failed because of the incorrect check that asserted only <code>TRUE</code> or <code>FALSE</code> (<a href="https://github.com/rOpenSpain/spanishoddata/issues/160" class="external-link">#160</a>)</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.1" id="spanishoddata-011-2025-04-09">spanishoddata 0.1.1 (2025-04-09)<a class="anchor" aria-label="anchor" href="#spanishoddata-011-2025-04-09"></a></h2><p class="text-muted">CRAN release: 2025-04-09</p>
<div class="section level3">
<h3 id="new-features-0-1-1">New features<a class="anchor" aria-label="anchor" href="#new-features-0-1-1"></a></h3>
<ul><li>
<code><a href="../reference/spod_cite.html">spod_cite()</a></code> function to easily cite the package and the data (<a href="https://github.com/rOpenSpain/spanishoddata/pull/134" class="external-link">#134</a>)</li>
</ul></div>
<div class="section level3">
<h3 id="breaking-changes-0-1-1">Breaking changes<a class="anchor" aria-label="anchor" href="#breaking-changes-0-1-1"></a></h3>
<ul><li>
<code>hour</code> column is superseeded by <code>time_slot</code> column in the output of <code><a href="../reference/spod_get.html">spod_get()</a></code> and <code><a href="../reference/spod_convert.html">spod_convert()</a></code>. <code>time_slot</code> is deprecated. It is still present in the tables, but will be removed in the end of 2025 but going forward please use the new <code>hour</code> column. Otherwise it is exactly the same as before, this is just a name change. (<a href="https://github.com/rOpenSpain/spanishoddata/issues/132" class="external-link">#132</a>)</li>
</ul></div>
<div class="section level3">
<h3 id="other-changes-0-1-1">Other changes<a class="anchor" aria-label="anchor" href="#other-changes-0-1-1"></a></h3>
<ul><li><p><code>spod_quick_get()</code> does not rely on metadata download anymore and can be used without setting the data directory with <code><a href="../reference/spod_set_data_dir.html">spod_set_data_dir()</a></code> (and therefore does not cause a warning if the data directory is not set).</p></li>
<li><p><code>hour</code> (ex-<code>time_slot</code>) column is now right next to the date column in the output of <code><a href="../reference/spod_get.html">spod_get()</a></code> and <code><a href="../reference/spod_convert.html">spod_convert()</a></code> (#)</p></li>
<li><p>maximum available CPU cores check is now turned off to improve compatibility when running the package from within a container in high performance computing environments (see <a href="https://github.com/rOpenSpain/spanishoddata/issues/130" class="external-link">#130</a> and <a href="https://github.com/rOpenSpain/spanishoddata/pull/140" class="external-link">#140</a> for details)</p></li>
<li><p>minor documentation improvements and updates</p></li>
<li><p>minor bug fixes</p></li>
</ul></div>
</div>
    <div class="section level2">
<h2 class="pkg-version" data-toc-text="0.1.0" id="spanishoddata-010-2024-12-18">spanishoddata 0.1.0 (2024-12-18)<a class="anchor" aria-label="anchor" href="#spanishoddata-010-2024-12-18"></a></h2><p class="text-muted">CRAN release: 2024-12-18</p>
<ul><li>Initial CRAN submission.</li>
</ul></div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


   </div>

  <!-- ropenspain rostemplate -->
<footer id="footer"><div class="container">
    <div class="row">
      <div class="col-md">
        <h4 data-toc-skip>About <img src="../logo.png" alt="spanishoddata Logo" height="24"> spanishoddata</h4>
        <p>Developed by <a href="https://www.ekotov.pro" class="external-link">Egor Kotov</a>, <a href="https://www.robinlovelace.net/" class="external-link">Robin Lovelace</a>.</p>
        <p>Part of the <span class="ROS-light">rOpenSpain</span> project.</p>
        <hr class="d-md-none"></div>
      <div class="col-md offset-md-4">
        <h4 data-toc-skip>About <img src="../ROS-logo.png" alt="ROpenSpain Logo" height="24"><span class="ROS-light"> rOpenSpain</span></h4>
        <a href="https://ropenspain.es/" class="external-link"><span class="ROS-light">rOpenSpain</span></a> is a community of R enthusiasts whose ultimate goal is to create high-quality R packages for data mining public Spanish open sources.
        <hr class="d-md-none"></div>
   </div>
  </div>
</footer><div id="copyright">
  <div class="container">
    <div class="row">
      <div class="col-md text-center text-lg-start">
        <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
      </div>
      <div class="col-md offset-md-4 text-center text-lg-start">
      <p>Template <a href="https://github.com/ropenspain/rostemplate/" class="external-link">rostemplate</a> by <a href="https://github.com/dieghernan/" class="external-link">dieghernan</a>, based on <a href="https://bootstraptemple.com/" class="external-link">bootstraptemple.com</a>.
      </p>
      </div>
    </div>
  </div>
</div>




  <script>
var h1s = document.getElementsByTagName("h1");
var myH1;
if (h1s.length > 0) {
  myH1 = h1s[0];
  myH1.classList.add("ROSh1");
}
</script></body></html>

